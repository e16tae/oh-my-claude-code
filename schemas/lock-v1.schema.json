{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://oh-my-claude-code.dev/schema/lock/v1.json",
  "title": "Claude Code Plugin Lock Schema v1",
  "description": "Schema for plugin version lock file",
  "type": "object",
  "required": ["lockfileVersion", "plugins"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "lockfileVersion": {
      "type": "integer",
      "const": 1,
      "description": "Lock file format version"
    },
    "generatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when lock file was generated"
    },
    "generatedBy": {
      "type": "string",
      "description": "Tool and version that generated this lock file"
    },
    "plugins": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": ["version", "resolved"],
        "properties": {
          "version": {
            "type": "string",
            "description": "Locked version"
          },
          "resolved": {
            "type": "string",
            "description": "Resolved source path or URL"
          },
          "integrity": {
            "type": "string",
            "pattern": "^(sha256|sha384|sha512)-[A-Za-z0-9+/=]+$",
            "description": "Integrity hash (algorithm-base64hash format)"
          },
          "source": {
            "type": "string",
            "enum": ["local", "registry", "github", "url"],
            "description": "Source type"
          },
          "dependencies": {
            "type": "object",
            "additionalProperties": { "type": "string" },
            "description": "Resolved dependency versions"
          },
          "optionalDependencies": {
            "type": "object",
            "additionalProperties": { "type": "string" },
            "description": "Resolved optional dependency versions"
          },
          "installedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Installation timestamp"
          }
        }
      },
      "description": "Locked plugin versions"
    }
  },
  "additionalProperties": false
}
